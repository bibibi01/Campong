<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.multi.campong.camping.model.mapper.CampingMapper">

	<resultMap type="Camping" id="campingListResultMap">
		<id property="contentId" column="CONTENTID"/>
		<result property="facltNm" column="FACLTNM"/>
		<result property="lineIntro" column="LINEINTRO"/>
		<result property="intro" column="INTRO"/>
		<result property="manageSttus" column="MANAGESTTUS"/>
		<result property="featureNm" column="FEATURENM"/>
		<result property="induty" column="INDUTY"/>
		<result property="lctCl" column="LCTCL"/>
		<result property="doNm" column="DONM"/>
		<result property="sigunguNm" column="SIGUNGUNM"/>
		<result property="zipcode" column="ZIPCODE"/>
		<result property="addr1" column="ADDR1"/>
		<result property="addr2" column="ADDR2"/>
		<result property="mapX" column="MAPX"/>
		<result property="mapY" column="MAPY"/>
		<result property="direction" column="DIRECTION"/>
		<result property="tel" column="TEL"/>
		<result property="homepage" column="HOMEPAGE"/>
		<result property="resveCl" column="RESVECL"/>
		<result property="gnrlSiteCo" column="GNRLSITECO"/>
		<result property="autoSiteCo" column="AUTOSITECO"/>
		<result property="glampSiteCo" column="GLAMPSITECO"/>
		<result property="caravSiteCo" column="CARAVSITECO"/>
		<result property="indvdlCaravSiteCo" column="INDVDLCARAVSITECO"/>
		<result property="tooltip" column="TOOLTIP"/>
		<result property="glampInnerFclty" column="GLAMPINNERFCLTY"/>
		<result property="caravInnerFclty" column="CARAVINNERFCLTY"/>
		<result property="operDeCl" column="OPERDECL"/>
		<result property="toiletCo" column="TOILETCO"/>
		<result property="swrmCo" column="SWRMCO"/>
		<result property="wtrplCo" column="WTRPLCO"/>
		<result property="brazierCl" column="BRAZIERCL"/>
		<result property="sbrsCl" column="SBRSCL"/>
		<result property="posblFcltyCl" column="POSBLFCLTYCL"/>
		<result property="themaEnvrnCl" column="THEMAENVRNCL"/>
		<result property="eqpmnLendCl" column="EQPMNLENDCL"/>
		<result property="animalCmgCl" column="ANIMALCMGCL"/>
		<result property="firstImageUrl" column="FIRSTIMAGEURL"/>
	</resultMap>
	
	<select id="selectCampingList" resultMap="campingListResultMap" parameterType="map">
		SELECT
			CONTENTID, FACLTNM, LINEINTRO, INTRO, MANAGESTTUS, 
			FEATURENM, INDUTY, LCTCL, DONM, SIGUNGUNM, ZIPCODE, 
			ADDR1, ADDR2, MAPX, MAPY, DIRECTION,TEL, HOMEPAGE,
			RESVECL, GNRLSITECO, AUTOSITECO, GLAMPSITECO, CARAVSITECO,
			INDVDLCARAVSITECO, TOOLTIP, GLAMPINNERFCLTY, CARAVINNERFCLTY,
			OPERDECL, TOILETCO, SWRMCO, WTRPLCO, BRAZIERCL, SBRSCL,
			POSBLFCLTYCL, THEMAENVRNCL, EQPMNLENDCL, ANIMALCMGCL,
			FIRSTIMAGEURL
		FROM CAMPING_CONTENTS
		WHERE 1 = 1
		<if test="sido != null">
			AND ADDR1 LIKE '%${sido}%' 
		</if>
		<if test="gugun != null">
			AND ADDR1 LIKE '%${gugun}%' 
		</if>
		<if test="lctCl != null">
			AND lctCl LIKE '%${lctCl}%' 
		</if>
		<if test="facltNm != null">
			AND FACLTNM LIKE '%${facltNm}%' 
		</if>
		
		<if test="checkedTheme != null">
			AND (
			<foreach collection="checkedTheme" item="themaEnvrnCl" separator="or">
				THEMAENVRNCL LIKE '%${themaEnvrnCl}%'
			</foreach>
			)
		</if>
		<if test="checkedFclty != null">
			AND (
			<foreach collection="checkedFclty" item="sbrsCl" separator="or">
				SBRSCL LIKE '%${sbrsCl}%'
			</foreach>
			)
		</if>
		<if test="checkedPet != null">
			AND ANIMALCMGCL LIKE '${checkedPet}%'
		</if>
		ORDER BY FIRSTIMAGEURL='' ASC LIMIT ${limit} OFFSET ${offset}
	</select>
	
	<select id="selectCampingCount" resultType="int" parameterType="map">
		SELECT
			COUNT(DISTINCT CONTENTID)
		FROM CAMPING_CONTENTS
		WHERE 1 = 1
		<if test="sido != null">
			AND ADDR1 LIKE '%${sido}%' 
		</if>
		<if test="gugun != null">
			AND ADDR1 LIKE '%${gugun}%' 
		</if>
		<if test="lctCl != null">
			AND lctCl LIKE '%${lctCl}%' 
		</if>
		<if test="facltNm != null">
			AND FACLTNM LIKE '%${facltNm}%' 
		</if>
		
		<if test="checkedTheme != null">
			AND (
			<foreach collection="checkedTheme" item="themaEnvrnCl" separator="or">
				THEMAENVRNCL LIKE '%${themaEnvrnCl}%'
			</foreach>
			)
		</if>
		<if test="checkedFclty != null">
			AND (
			<foreach collection="checkedFclty" item="sbrsCl" separator="or">
				SBRSCL LIKE '%${sbrsCl}%'
			</foreach>
			)
		</if>
		<if test="checkedPet != null">
			AND ANIMALCMGCL LIKE '${checkedPet}%'
		</if>
	</select>
	
	<select id="selectCampingByNo" resultMap="campingListResultMap" parameterType="int">
		SELECT  
			CONTENTID, FACLTNM, LINEINTRO, INTRO, MANAGESTTUS, 
			FEATURENM, INDUTY, LCTCL, DONM, SIGUNGUNM, ZIPCODE, 
			ADDR1, ADDR2, MAPX, MAPY, DIRECTION,TEL, HOMEPAGE,
			RESVECL, GNRLSITECO, AUTOSITECO, GLAMPSITECO, CARAVSITECO,
			INDVDLCARAVSITECO, TOOLTIP, GLAMPINNERFCLTY, CARAVINNERFCLTY,
			OPERDECL, TOILETCO, SWRMCO, WTRPLCO, BRAZIERCL, SBRSCL,
			POSBLFCLTYCL, THEMAENVRNCL, EQPMNLENDCL, ANIMALCMGCL,
			FIRSTIMAGEURL
		FROM CAMPING_CONTENTS
		WHERE CONTENTID = #{contentId}
	</select>

</mapper>