<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<th:block th:replace="~{common/layout :: head}"></th:block>
<link rel="stylesheet" type="text/css"
	th:href="@{/assets/css/shopping.css}">

</head>

<body>
	<header th:replace="~{common/layout :: #header}"></header>

	<main>
		<!-- ======================문구 있는 헤더 -->
		<section class="bih-s-1 position-relative"
			style="background-image: url(/assets/images/header/7.png); background-position: center; background-size: cover;">
			<!-- Background dark overlay -->
			<div class="bg-overlay bg-dark opacity-3"></div>
			<div class="container z-index-9 position-relative">
				<div class="row py-sm-7">
					<!-- Title -->
					<div class="col-xl-8 m-auto my-7 text-center">
						<h3 class="text-white mb-0">
							캠핑 필수 아이템, <br>캠퐁에서 손쉽게 찾아보세요
						</h3>
					</div>
				</div>
			</div>
		</section>
		<!-- =======================문구 있는 헤더 끝 -->

		<section class="pt-5 pb-4">
			<div class="container position-relative">
				<!-- 검색 필터 -->
				<!-- Collapse body START -->
				<div class="searchfilter">
					<div class="card card-body bg-light p-4 mt-4 mb-5 z-index-9">
						<!-- Form START -->
						<form class="row g-4">
							<!-- Input item -->
							<div class="col-md-6 col-lg-4 me-3">
								<div class="form-control-borderless">
									<label class="form-label pb-2">검색하기</label>
									<div class="position-relative">
										<div class="fas fa-search position-absolute mt-3 ms-3"></div>
										<input type="text" class="form-control form-control-lg ps-5"
											placeholder="검색어를 입력하세요" id="searchValue" name="searchValue"
											th:value="${param.searchValue}">
									</div>

								</div>
							</div>

							<!-- 가격 슬라이더 -->
							<div class="col-md-6 col-lg-5 ms-9">
								<div class="form-control-borderless">
									<label class="form-label pb-2">가격대</label>
									<div class="position-relative">
										<div class="noui-wrapper">
											<div class="d-flex justify-content-between">
												<input type="text" name="lowPrice" class="text-black input-with-range-min">
												<input type="text" name="highPrice" class="text-black input-with-range-max">
											</div>
											<div class="noui-slider-range mt-2" data-range-min='10000'
												data-range-max='1000000' data-range-selected-min='25000'
												data-range-selected-max='200000' id="data-range-min"></div>
										</div>
									</div>
								</div>
							</div>

							<!-- 캠핑용품 필터 -->
							<div class="col-md-6 col-lg-6">
								<div class="col-12">
									<div class="form-control-borderless">
										<label class="form-label pb-2">캠핑 용품</label>
										<div class="row g-2">
											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="텐트"
														th:checked="${#arrays.contains(CheckItem, '텐트')  ? 'checked' : null}"
														name="CheckItem" id="Item1"> <label
														class="form-check-label h6 mb-0" for="Item1"> 텐트 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="취사용품"
														th:checked="${#arrays.contains(CheckItem, '취사용품')  ? 'checked' : null}"
														name="CheckItem" id="Item2"> <label
														class="form-check-label h6 mb-0" for="Item2"> 취사용품
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="캠핑가구"
													th:checked="${#arrays.contains(CheckItem, '캠핑가구')  ? 'checked' : null}"
														name="CheckItem" id="Item3"> <label
														class="form-check-label h6 mb-0" for="Item3"> 캠핑가구
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="캠핑매트"
													th:checked="${#arrays.contains(CheckItem, '캠핑매트')  ? 'checked' : null}"
														name="CheckItem" id="Item4"> <label
														class="form-check-label h6 mb-0" for="Item4"> 캠핑매트
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="아이스박스"
													th:checked="${#arrays.contains(CheckItem, '아이스박스')  ? 'checked' : null}"
														name="CheckItem" id="Item5"> <label
														class="form-check-label h6 mb-0" for="Item5">
														아이스박스 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="침낭"
													th:checked="${#arrays.contains(CheckItem, '침낭')  ? 'checked' : null}"
														name="CheckItem" id="Item6"> <label
														class="form-check-label h6 mb-0" for="Item6"> 침낭 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="천막"
													th:checked="${#arrays.contains(CheckItem, '천막')  ? 'checked' : null}"
														name="CheckItem" id="Item7"> <label
														class="form-check-label h6 mb-0" for="Item7"> 천막 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="캠핑왜건"
													th:checked="${#arrays.contains(CheckItem, '캠핑왜건')  ? 'checked' : null}"
														name="CheckItem" id="Item8"> <label
														class="form-check-label h6 mb-0" for="Item8"> 캠핑왜건
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="텐트/타프용품"
													th:checked="${#arrays.contains(CheckItem, '텐트/타프용품')  ? 'checked' : null}"
														name="CheckItem" id="Item9"> <label
														class="form-check-label h6 mb-0" for="Item9"> 텐트용품
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="기타캠핑용품"
													th:checked="${#arrays.contains(CheckItem, '기타캠핑용품')  ? 'checked' : null}"
														name="CheckItem" id="Item10"> <label
														class="form-check-label h6 mb-0" for="Item10">
														기타용품 </label>
												</div>
											</div>

										</div>
										<!-- Row END -->
									</div>
								</div>
							</div>

							<!-- 브랜드 필터-->
							<div class="col-md-6 col-lg-6">
								<div class="col-12">
									<div class="form-control-borderless">
										<label class="form-label pb-2">브랜드</label>
										<div class="row g-2">
											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="코베아"
														name="ChectBrand" id="Brand1"> <label
														class="form-check-label h6 mb-0" for="Brand1"> 코베아
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="캠핑문"
														name="ChectBrand" id="Brand2"> <label
														class="form-check-label h6 mb-0" for="Brand2"> 캠핑문
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="스노우피크"
														name="ChectBrand" id="Brand3"> <label
														class="form-check-label h6 mb-0" for="Brand3">
														스노우피크 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="카즈미"
														name="ChectBrand" id="Brand4"> <label
														class="form-check-label h6 mb-0" for="Brand4"> 카즈미
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="콜맨"
														name="ChectBrand" id="Brand5"> <label
														class="form-check-label h6 mb-0" for="Brand5"> 콜맨
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value=""
														name="ChectBrand" id="Brand6"> <label
														class="form-check-label h6 mb-0" for="Brand6">
														씨투써밋 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value=""
														name="ChectBrand" id="Brand7"> <label
														class="form-check-label h6 mb-0" for="Brand7">
														네이처하이크 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value=""
														name="ChectBrand" id="Brand8"> <label
														class="form-check-label h6 mb-0" for="Brand8"> 스탠리
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value=""
														name="ChectBrand" id="Brand9"> <label
														class="form-check-label h6 mb-0" for="Brand9">
														스노우라인 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value=""
														name="ChectBrand" id="Brand10"> <label
														class="form-check-label h6 mb-0" for="Brand10">
														헬리녹스 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value=""
														name="ChectBrand" id="Brand11"> <label
														class="form-check-label h6 mb-0" for="Brand11"> 반고
													</label>
												</div>
											</div>
											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value=""
														name="ChectBrand" id="Brand12"> <label
														class="form-check-label h6 mb-0" for="Brand12"> 기타
														브랜드 </label>
												</div>
											</div>

										</div>
										<!-- Row END -->
									</div>
								</div>
							</div>

							<!-- Button -->
							<div class="text-end align-items-center">
								<button class="btn btn-link p-0 mb-0">검색 초기화</button>
								<button id="" class="btn btn-dar btn-apply mb-0 ms-3">필터
									적용</button>
							</div>
						</form>
						<!-- Form END -->
					</div>
				</div>
				<!-- Collapse body END -->

			</div>
		</section>
		<!-- ======================= Title and Tabs END -->

		<!-- ======================= 리스트 -->
		<section class="pt-0">
			<div class="container">
				<div class="row g-4">
					<th:block th:if="${list.size == 0}">
						<div>
							<h6>조회된 상품이 없습니다.</h6>
						</div>
					</th:block>

					<th:block th:if="${list.size != 0}">
						<th:block th:each="shop : ${list}">
							<!-- Card item START -->
							<div class="col-md-6 col-xl-4">
								<div class="card shadow pb-0 h-100">

									<!-- 이미지 -->
									<img th:src="@{${shop.image}}" class="rounded-2 h-100"
										alt="Card image" style="object-fit: cover;">

									<!-- Card body START -->
									<div class="card-body px-3 pb-0">
										<!-- Title -->
										<h5 class="card-title">
											<a th:href="@{(${shop.link})}">[[${shop.title}]]</a>
										</h5>
									</div>
									<!-- Card body END -->

									<!-- Card footer START-->
									<div class="card-footer pt-4">
										<!-- Price and Button -->
										<div
											class="d-sm-flex justify-content-sm-between align-items-center">
											<!-- Price -->
											<div class="d-flex align-items-center">
												<h5 class="fw-normal text-success mb-0 me-1">￦[[${shop.lprice}]]</h5>
											</div>
											<!-- Button -->
											<div class="mt-2 mt-sm-0">
												<!-- Rating and basket -->
												<div class="d-flex justify-content-between">
													<a th:href="@{shopping-basket.html}" class="h6 z-index-2">
														<i class="btn_shopicon bi fa-fw bi-basket3-fill"></i>
													</a>
												</div>

											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- Card item END -->
				</div>

				<!-- 페이징 -->
				<div class="row">
					<div class="col-12">
						<nav class="mt-7 my-4 d-flex justify-content-center"
							aria-label="navigation">
							<ul
								class="pagination pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
								<!--이전 페이지 -->
								<li class="page-item mb-0">
									<button class="page-link"
										th:onclick="|movePage('/shop/shopping?page=${pageInfo.prevPage}');|"
										tabindex="-1">
										<i class="fa-solid fa-angle-left"></i>
									</button>
								</li>
								<!-- 10개 페이지 -->
								<th:block
									th:each="num, status : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}">
									<th:block th:if="${status.current == pageInfo.currentPage}">
										<li class="page-item mb-0 active">
											<button class="page-link"
												th:onclick="|movePage('/shop/shopping?page=${status.current}');|"
												disabled>[[${status.current}]]</button>
										</li>
									</th:block>
									<th:block th:if="${status.current != pageInfo.currentPage}">
										<li class="page-item mb-0">
											<button class="page-link"
												th:onclick="|movePage('/shop/shopping?page=${status.current}');|">
												[[${status.current}]]</button>
										</li>
									</th:block>
								</th:block>
								<!-- 다음 페이지 -->
								<li class="page-item mb-0">
									<button class="page-link"
										th:onclick="|movePage('/shop/shopping?page=${pageInfo.nextPage}');|">
										<i class="fa-solid fa-angle-right"></i>
									</button>
								</li>
							</ul>
						</nav>
					</div>
				</div>
			</div>
		</section>
	</main>

	<!-- **************** MAIN CONTENT END **************** -->

	<!-- Back to top -->
	<div class="back-top"></div>

	<footer th:replace="~{common/layout :: #footer}"></footer>

	<script type="text/javascript">
		function movePage(pageUrl) {
			var searchValue = document.getElementById("searchValue");	// 입력
			var searchTypes = document.getElementsByName("searchType");	// 체크
			var searchType = 'title';
			
			if (searchValue.value.length > 0) {
				for (var i = 0; i < searchTypes.length; i++) {
					if (searchTypes[i].checked == true) {
						searchType = searchTypes[i].value;
					}
				}
				pageUrl = pageUrl + '&searchType=' + searchType + '&searchValue=' + searchValue.value;
			
				
				<!--검색 필터-->
				var items = document.getElementsByName("CheckItem");
				var item = 'CheckItem';
				var brands = document.getElementsByName("ChectBrand");
				var brand = 'ChectBrand';
				
				for(var i = 0; i < items.length; i++){
					if(items[i].checked == true){
						item = '&item=' + items[i].value;
						pageUrl += item;
					}
				}
				
				for(var i = 0; i < brands.length; i++){
					if(brands[i].checked == true){
						brand = '&brand=' + brands[i].value;
						pageUrl += brand;
					}
				}
			}
			
			location.href = encodeURI(pageUrl);
		}
	</script>

</body>

</html>